{% extends "layout.html" %}

{% block title %}Marketplace Pokémon - Analyse de cartes{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/market.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
{% endblock %}

{% block content %}
<!-- Banner principal avec recherche -->
<section class="main-banner">
    <div class="container">
        <div class="banner-content">
            <h2>Bienvenue sur la <span class="highlight">Marketplace</span> de POKIA</h2>
            <p>Achetez et vendez des cartes Pokémon analysées et notées avec notre technologie de pointe</p>
            <div class="search-box">
                <input type="text" placeholder="Rechercher des cartes Pokémon, éditions spéciales...">
                <button type="submit"><i class="fas fa-search"></i></button>
            </div>
        </div>
    </div>
</section>

<!-- Catégories populaires -->
<section class="categories">
    <div class="container">
        <div class="section-header">
            <h2>Catégories Populaires</h2>
            <a href="{{ url_for('all_listings') }}" class="view-all">Voir tout <i class="fas fa-arrow-right"></i></a>
        </div>
        <div class="category-grid">
            <a href="#" class="category-card">
                <div class="category-icon">
                    <i class="fas fa-crown"></i>
                </div>
                <h3>Cartes Rares</h3>
            </a>
            <a href="#" class="category-card">
                <div class="category-icon">
                    <i class="fas fa-certificate"></i>
                </div>
                <h3>POKIA 10</h3>
            </a>
            <a href="#" class="category-card">
                <div class="category-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3>Type Électrique</h3>
            </a>
            <a href="#" class="category-card">
                <div class="category-icon">
                    <i class="fas fa-fire"></i>
                </div>
                <h3>Type Feu</h3>
            </a>
            <a href="#" class="category-card">
                <div class="category-icon">
                    <i class="fas fa-leaf"></i>
                </div>
                <h3>Type Plante</h3>
            </a>
            <a href="#" class="category-card">
                <div class="category-icon">
                    <i class="fas fa-water"></i>
                </div>
                <h3>Type Eau</h3>
            </a>
        </div>
    </div>
</section>

<!-- Produits en vedette -->
<section class="featured-products">
    <div class="container">
        <div class="section-header">
            <h2>Cartes en vedette</h2>
            <div class="header-actions">
                <a href="{{ url_for('add_card') }}" class="add-card-btn"><i class="fas fa-plus"></i> Ajouter une carte</a>
                <a href="{{ url_for('all_listings') }}" class="view-all">Voir tout <i class="fas fa-arrow-right"></i></a>
            </div>
        </div>
        <div class="products-grid">
            {% for card in cards %}
            <div class="product-card">
                {% if card.psa_grade %}
                <div class="product-badge {% if 'PSA 10' in card.psa_grade %}sale{% elif 'PSA 9' in card.psa_grade %}new{% else %}hot{% endif %}">{{ card.psa_grade }}</div>
                {% elif card.rarity in ['Ultra Rare', 'Secrète', 'Hyper Rare', 'Rainbow', 'Shiny'] %}
                <div class="product-badge hot">{{ card.rarity }}</div>
                {% endif %}
                <div class="product-image">
                    <!-- Image cliquable vers la page de détails -->
                    <a href="{{ url_for('card_details', card_id=card.id) }}">
                        <img src="{{ url_for('static', filename=card.image_path) }}" alt="{{ card.name }}">
                    </a>
                    <div class="product-actions">
                        <form action="{{ url_for('add_to_cart', card_id=card.id) }}" method="POST" class="cart-form">
                            <button type="submit" class="action-btn"><i class="fas fa-shopping-cart"></i></button>
                        </form>
                        <a href="{{ url_for('card_details', card_id=card.id) }}" class="action-btn"><i class="fas fa-eye"></i></a>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-category">{{ card.type }}</div>
                    <!-- Titre cliquable vers la page de détails -->
                    <h3 class="product-title">
                        <a href="{{ url_for('card_details', card_id=card.id) }}">{{ card.name }}</a>
                    </h3>
                    <div class="product-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                        <span>(0)</span>
                    </div>
                    <div class="product-price">
                        <span class="current-price">{{ "%.2f"|format(card.price) }} €</span>
                        {% if card.old_price %}
                        <span class="old-price">{{ "%.2f"|format(card.old_price) }} €</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% else %}
            <div class="no-cards-message">
                <p>Aucune carte n'est disponible pour le moment. Soyez le premier à en ajouter une !</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Bannière promotionnelle -->
<section class="promo-banner">
    <div class="container">
        <div class="promo-content">
            <h2>Offre Spéciale</h2>
            <p>Analyse gratuite pour toute carte vendue sur notre marketplace</p>
            <div class="countdown">
                <div class="countdown-item">
                    <span class="count">02</span>
                    <span class="label">Jours</span>
                </div>
                <div class="countdown-item">
                    <span class="count">18</span>
                    <span class="label">Heures</span>
                </div>
                <div class="countdown-item">
                    <span class="count">45</span>
                    <span class="label">Minutes</span>
                </div>
                <div class="countdown-item">
                    <span class="count">30</span>
                    <span class="label">Secondes</span>
                </div>
            </div>
            <a href="{{ url_for('index') }}" class="promo-btn">Analyser ma carte</a>
        </div>
    </div>
</section>

<!-- Avantages -->
<section class="features">
    <div class="container">
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-microscope"></i>
                </div>
                <h3>Analyse Précise</h3>
                <p>Chaque carte est analysée avec notre technologie POKIA</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Authenticité Garantie</h3>
                <p>Toutes nos cartes sont vérifiées et authentifiées</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-truck"></i>
                </div>
                <h3>Livraison Sécurisée</h3>
                <p>Emballage spécial pour protéger vos précieuses cartes</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-sync"></i>
                </div>
                <h3>Retours Faciles</h3>
                <p>14 jours pour changer d'avis, sans questions</p>
            </div>
        </div>
    </div>
</section>

<!-- Back to top button -->
<a href="#" class="back-to-top">
    <i class="fas fa-chevron-up"></i>
</a>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/market.js') }}"></script>
{% endblock %}